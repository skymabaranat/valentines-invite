<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ff4d6d" />
  <title>Open Me üíå</title>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Confetti / Fireworks -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --bg1:#fff0f5;
      --bg2:#ffe4ec;
      --ink:#1a1a1a;
      --accent:#ff4d6d;
      --accent2:#ff7aa2;
      --paper:#fff7e6;
      --paper2:#ffefcc;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 500px at 15% 20%, #ffd1dc, transparent),
        radial-gradient(1000px 600px at 85% 25%, var(--bg2), transparent),
        linear-gradient(180deg, var(--bg1), #fff);
      display:grid;
      place-items:center;
      padding:24px;
      overflow:hidden;
    }

    .stage{
      width:min(560px, 100%);
      position:relative;
    }

    /* Letter */
    .letterWrap{
      position:relative;
      perspective:1200px;
      width:min(520px, 100%);
      margin:0 auto;
    }
    .envelope{
      border-radius:22px;
      padding:18px;
      background:linear-gradient(135deg, rgba(255,255,255,.9), rgba(255,255,255,.6));
      border:1px solid rgba(255,255,255,.9);
      box-shadow:0 24px 60px rgba(0,0,0,.12);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .paper{
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      border-radius:18px;
      border:1px solid rgba(0,0,0,.06);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.4);
      padding:22px;
      position:relative;
      min-height:240px;
      transform-origin: top;
      transform: rotateX(0deg);
      transition: transform 700ms cubic-bezier(.2,.8,.2,1);
    }
    .paper.open{
      transform: rotateX(-180deg);
    }

    .seal{
      position:absolute;
      inset:auto 18px 18px auto;
      width:44px; height:44px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.2)),
                  linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow:0 14px 24px rgba(255,77,109,.28);
      display:grid;
      place-items:center;
      color:white;
      font-weight:800;
      user-select:none;
    }

    .openMe{
      display:grid;
      place-items:center;
      height:100%;
      text-align:center;
      padding:26px 12px;
      gap:10px;
      user-select:none;
    }
    .openMe h1{
      margin:0;
      font-size:34px;
      letter-spacing:-0.03em;
    }
    .openMe p{margin:0; opacity:.8}
    .tapHint{
      margin-top:6px;
      font-size:13px;
      opacity:.7;
    }

    /* Reveal card (after opening) */
    .card{
      margin-top:18px;
      border-radius:22px;
      padding:20px;
      background:rgba(255,255,255,.85);
      border:1px solid rgba(255,255,255,.95);
      box-shadow:0 18px 50px rgba(0,0,0,.12);
      backdrop-filter: blur(10px);
      animation: pop 520ms cubic-bezier(.2,.8,.2,1);
    }
    @keyframes pop {
      from { transform: translateY(10px); opacity:0; }
      to { transform: translateY(0px); opacity:1; }
    }
    .card h2{
      margin:0 0 8px;
      font-size:28px;
      letter-spacing:-0.02em;
    }
    .card .sub{margin:0 0 14px; opacity:.85; line-height:1.45}
    .chips{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:10px 0 16px;
    }
    .chip{
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      border-radius:999px;
      padding:8px 12px;
      font-weight:600;
      font-size:14px;
    }
    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      border:0;
      border-radius:16px;
      padding:12px 16px;
      font-weight:800;
      cursor:pointer;
      font-size:16px;
    }
    .yes{
      background:linear-gradient(135deg, var(--accent), var(--accent2));
      color:#fff;
      box-shadow:0 14px 26px rgba(255,77,109,.25);
    }
    .no{
      background:#fff;
      color:#111;
      border:1px solid rgba(0,0,0,.10);
    }
    .note{
      margin-top:12px;
      font-size:13px;
      opacity:.75;
      line-height:1.45;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    // ---- Effects (confetti + fireworks) ----
    function burstConfetti() {
      // A nice "letter opened" pop
      confetti({
        particleCount: 140,
        spread: 80,
        origin: { x: 0.5, y: 0.25 },
        startVelocity: 45,
        scalar: 1.0
      });
      confetti({
        particleCount: 80,
        spread: 120,
        origin: { x: 0.5, y: 0.30 },
        startVelocity: 35,
        scalar: 0.9
      });
    }

    function fireworksShow() {
      // Quick fireworks-like sequence
      const duration = 1800;
      const end = Date.now() + duration;

      (function frame() {
        // left burst
        confetti({
          particleCount: 35,
          spread: 70,
          startVelocity: 55,
          origin: { x: 0.25, y: 0.65 },
          scalar: 1.0,
          ticks: 220
        });
        // right burst
        confetti({
          particleCount: 35,
          spread: 70,
          startVelocity: 55,
          origin: { x: 0.75, y: 0.65 },
          scalar: 1.0,
          ticks: 220
        });
        // center burst
        confetti({
          particleCount: 45,
          spread: 90,
          startVelocity: 65,
          origin: { x: 0.5, y: 0.55 },
          scalar: 1.05,
          ticks: 240
        });

        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    // ---- Main UI ----
    function App() {
      // EDIT THESE:
      const config = useMemo(() => ({
        nickname: "My Love",
        question: "Will you be my Valentine?",
        when: "Friday ‚Ä¢ 7pm",
        where: "Pick-up at yours üòâ",
        vibe: "Dinner + surprise ‚ú®",
        note: "P.S. I love you more than you know."
      }), []);

      const [opened, setOpened] = useState(false);
      const [showInvite, setShowInvite] = useState(false);
      const [noIsYes, setNoIsYes] = useState(false);
      const didBurstRef = useRef(false);

      const openLetter = () => {
        if (opened) return;
        setOpened(true);

        // confetti on open (once)
        if (!didBurstRef.current) {
          didBurstRef.current = true;
          burstConfetti();
          if (navigator.vibrate) navigator.vibrate([30, 20, 30]);
        }

        // reveal the invite after the "flip" animation
        window.setTimeout(() => setShowInvite(true), 620);
      };

      const onYes = () => {
        fireworksShow();
        if (navigator.vibrate) navigator.vibrate([40, 20, 40, 20, 70]);
      };

      const onNo = () => {
        // turns into Yes
        setNoIsYes(true);
        // tiny playful confetti
        confetti({ particleCount: 30, spread: 60, origin: { x: 0.5, y: 0.45 } });
        if (navigator.vibrate) navigator.vibrate(20);
      };

      return (
        <div className="stage">
          <div className="letterWrap">
            <div
              className="envelope"
              role="button"
              aria-label="Open letter"
              onClick={openLetter}
              onKeyDown={(e) => (e.key === "Enter" ? openLetter() : null)}
              tabIndex={0}
            >
              <div className={"paper " + (opened ? "open" : "")}>
                <div className="openMe">
                  <div style={{fontSize: "38px"}}>üíå</div>
                  <h1>Open me</h1>
                  <p>Tap the letter</p>
                  <div className="tapHint">(yes, this is your official invite)</div>
                </div>
                <div className="seal">‚ô°</div>
              </div>
            </div>
          </div>

          {showInvite && (
            <div className="card" aria-label="Invitation">
              <h2>Hey {config.nickname} üíñ</h2>
              <p className="sub">{config.question}</p>

              <div className="chips">
                <span className="chip">üóìÔ∏è {config.when}</span>
                <span className="chip">üìç {config.where}</span>
                <span className="chip">‚ú® {config.vibe}</span>
              </div>

              <div className="actions">
                <button className="yes" onClick={onYes}>Yes üíñ</button>

                {!noIsYes ? (
                  <button className="no" onClick={onNo}>No üôÉ</button>
                ) : (
                  <button className="yes" onClick={onYes}>Yes üíñ</button>
                )}
              </div>

              <div className="note">{config.note}</div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
